<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Review Modal</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .table-container {
            margin: 20px;
        }
        .review-modal {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 20px;
            border: 2px solid #007bff;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            z-index: 1000;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }
        .review-content {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 4px;
            margin: 10px 0;
            line-height: 1.6;
            white-space: pre-wrap;
        }
        .close-btn {
            background: #dc3545;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            float: right;
        }
        .eye-icon {
            cursor: pointer;
            color: #007bff;
        }
        .eye-icon:hover {
            color: #0056b3;
        }
    </style>
</head>
<body>
    <div class="container-fluid">
        <h2 class="mt-3">Test - Hiển thị nội dung đánh giá đầy đủ</h2>
        
        <div class="table-container">
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Khách hàng</th>
                        <th>Sản phẩm</th>
                        <th>Đánh giá</th>
                        <th>Nội dung</th>
                        <th>Ngày tạo</th>
                        <th>Xem</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>#37</td>
                        <td>
                            <div class="fw-bold">user1</div>
                            <small>anhhoang30012004@gmail.com</small>
                        </td>
                        <td>
                            <div class="fw-bold">Bó hoa hồng sinh nhật</div>
                            <small>450,000 VNĐ</small>
                        </td>
                        <td>5/5</td>
                        <td>
                            <p>Hoa rất đẹp và tươi, giao hàng nhanh chóng. Tôi rất hài lòng với chất lượng sản phẩm. Bó hoa được bó rất đẹp và có mùi thơm tự nhiên. Nhân viên giao hàng rất lịch sự và chuyên nghiệp. Tôi sẽ tiếp tục mua hàng ở đây trong tương lai. Cảm ơn shop rất nhiều!</p>
                        </td>
                        <td>2025-07-25 14:00:52</td>
                        <td>
                            <i class="fas fa-eye eye-icon" onclick="showFullReview(37)" title="Xem chi tiết"></i>
                        </td>
                    </tr>
                    <tr>
                        <td>#36</td>
                        <td>
                            <div class="fw-bold">shipper2</div>
                            <small>tranhuyhoang30012004@gmail.com</small>
                        </td>
                        <td>
                            <div class="fw-bold">Bó hoa Valentine lãng mạn</div>
                            <small>750,000 VNĐ</small>
                        </td>
                        <td>2/5</td>
                        <td>
                            <p>Sản phẩm không như mong đợi. Hoa hơi héo và không tươi lắm. Giá cả thì khá cao so với chất lượng nhận được. Tôi hy vọng shop sẽ cải thiện chất lượng sản phẩm trong tương lai.</p>
                        </td>
                        <td>2025-07-25 02:19:43</td>
                        <td>
                            <i class="fas fa-eye eye-icon" onclick="showFullReview(36)" title="Xem chi tiết"></i>
                        </td>
                    </tr>
                    <tr>
                        <td>#35</td>
                        <td>
                            <div class="fw-bold">customer1</div>
                            <small>customer1@gmail.com</small>
                        </td>
                        <td>
                            <div class="fw-bold">Lẵng hoa Giáng Sinh đỏ trắng</div>
                            <small>980,000 VNĐ</small>
                        </td>
                        <td>4/5</td>
                        <td>
                            <p>Lẵng hoa Giáng Sinh rất đẹp và phù hợp với không khí lễ hội. Màu sắc hài hòa, thiết kế tinh tế. Chỉ có điều giao hàng hơi chậm một chút so với dự kiến. Nhưng nhìn chung tôi rất hài lòng với sản phẩm này. Sẽ đặt hàng lại vào dịp khác.</p>
                        </td>
                        <td>2025-07-25 01:51:52</td>
                        <td>
                            <i class="fas fa-eye eye-icon" onclick="showFullReview(35)" title="Xem chi tiết"></i>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <script>
        // Function to show full review content
        function showFullReview(reviewId) {
            console.log('Showing full review for ID:', reviewId);
            
            // Find the table row with this review ID
            const tableRows = document.querySelectorAll('tbody tr');
            let targetRow = null;
            
            tableRows.forEach(row => {
                const idCell = row.querySelector('td:first-child');
                if (idCell && idCell.textContent.includes('#' + reviewId)) {
                    targetRow = row;
                }
            });
            
            if (!targetRow) {
                alert('Không tìm thấy đánh giá #' + reviewId);
                return;
            }
            
            // Get data from table cells
            const cells = targetRow.querySelectorAll('td');
            
            const reviewID = cells[0].textContent.trim();
            const customerInfo = cells[1].textContent.trim();
            const productInfo = cells[2].textContent.trim();
            const rating = cells[3].textContent.trim();
            const fullComment = cells[4].querySelector('p').textContent.trim();
            const reviewDate = cells[5].textContent.trim();
            
            // Create and show modal
            const modalHTML = `
                <div class="review-modal" id="reviewModal">
                    <h5 style="color: #007bff; margin-bottom: 15px;">
                        <i class="fas fa-comment-dots me-2"></i>
                        Chi tiết đánh giá ${reviewID}
                    </h5>
                    
                    <div class="mb-3">
                        <strong>Khách hàng:</strong><br>
                        ${customerInfo}
                    </div>
                    
                    <div class="mb-3">
                        <strong>Sản phẩm:</strong><br>
                        ${productInfo}
                    </div>
                    
                    <div class="mb-3">
                        <strong>Đánh giá:</strong> ${rating}
                    </div>
                    
                    <div class="mb-3">
                        <strong>Nội dung đánh giá đầy đủ:</strong>
                        <div class="review-content">
                            ${fullComment}
                        </div>
                    </div>
                    
                    <div class="mb-3">
                        <strong>Ngày tạo:</strong> ${reviewDate}
                    </div>
                    
                    <button class="close-btn" onclick="closeModal()">
                        <i class="fas fa-times me-1"></i>
                        Đóng
                    </button>
                    <div style="clear: both;"></div>
                </div>
            `;
            
            // Add modal to page
            document.body.insertAdjacentHTML('beforeend', modalHTML);
        }
        
        // Function to close modal
        function closeModal() {
            const modal = document.getElementById('reviewModal');
            if (modal) {
                modal.remove();
            }
        }
        
        console.log('Test page loaded successfully!');
    </script>
</body>
</html>
